#!/bin/bash
# Git post-commit hook for AIKnowSys
# Auto-rebuilds context index when context files are committed

# Only rebuild if context files changed in this commit
if git diff --name-only HEAD~1 HEAD 2>/dev/null | grep -q '^\.aiknowsys/\(plans\|sessions\|learned\)/'; then
  echo "ðŸ“‹ Context files changed in commit, rebuilding index..."
  npx aiknowsys rebuild-index --quiet 2>/dev/null || node bin/cli.js rebuild-index --quiet 2>/dev/null || true
  echo "âœ… Context index updated"
fi
